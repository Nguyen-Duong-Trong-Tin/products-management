extends ../../layouts/default.pug
include ../../mixins/box-head.pug
include ../../mixins/box-filter.pug
include ../../mixins/form-search.pug
include ../../mixins/box-pagination.pug
include ../../mixins/form-change-multi.pug
include ../../mixins/box-alert.pug

block main
  +box-alert-success(messages)

  .products
    .container
      +box-head(pageTitle)
      .card
        .card-header Filters and Search
        .card-body
          .row
            .col-6
              +box-filter(buttonsStatus)
            .col-6
              +form-search(keyword)
      .card
        .card-header Sort
        .card-body
          .input-group
            select(
              class="form-select"
              name="sort"
              select-sort
            )
              option(value="position-desc" option-default-sort) Position DESC
              option(value="position-asc") Position ASC
              option(value="title-asc") Title A - Z
              option(value="title-desc") Title Z - A
            button(clear-sort class="btn btn-danger") Clear
      
      .row
        .col-6
          +formChangeMulti(`${prefixAdmin}/products-category/change-multi`)
        .col-6
          a(
            href=`${prefixAdmin}/products-category/create`
            class="badge text-bg-success"
          ) + Add a product category
      table(
        class="table table-hover"
        id="table-products"
      )
        thead
          tr
            th
              input(
                name="checkAll"
                type="checkbox"
              )
            th Order Number
            th Image
            th Title
            th Price
            th Position
            th Status
            th Action
        tbody
          each item, idx in records
            tr
              td
                input(
                  type="checkbox"
                  name="checkByID"
                  value=item.id
                )
              td #{idx + 1}
              td
                img(src=item.thumbnail, alt=item.title)
              td #{item.title}
              td #{item.price}$
              td
                input(
                  type="number"
                  name="position"
                  value=item.position
                  min=1
                )
              td
                if (item.status === "active")
                  button(
                    class="btn btn-success"
                    button-change-status
                    data-id=item.id
                    data-status=item.status
                  ) #{item.status}
                else
                  button(
                    class="btn btn-danger"
                    button-change-status
                    data-id=item.id
                    data-status=item.status
                  ) #{item.status}
              td
                a(
                  href=`${prefixAdmin}/products-category/detail/${item.id}`
                  class="btn btn-secondary btn-sm"
                ) Detail
                a(
                  href=`${prefixAdmin}/products-category/edit/${item.id}`
                  class="btn btn-warning btn-sm"
                ) Edit
                button(
                  class="btn btn-danger btn-sm"
                  button-delete-item
                  data-id=item.id
                ) Delete
      +box-pagination(pagination)

  form(
    action=""
    method="POST"
    id="form-change-status"
    data-path=`${prefixAdmin}/products-category/change-status/`
  )

  form(
    action=""
    method="POST"
    id="form-delete-item"
    data-path=`${prefixAdmin}/products-category/delete-item/`
  )

  script(src="/admin/js/product.js")